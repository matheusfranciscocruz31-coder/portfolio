2025-09-25 19:01:35.277 | INFO     | __main__:_handle_events:70 - Symbol definido
2025-09-25 19:01:35.852 | INFO     | app.data.market_data_stream:start:39 - Starting market data stream
2025-09-25 19:01:36.213 | INFO     | __main__:_handle_events:99 - Historico inicial carregado
2025-09-25 19:01:36.213 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x0000013E33B01DA0>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x0000013E33B01D00>
    │       └ <function run at 0x0000013E27C322A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x0000013E319AFD80>
           │      └ <function Runner.run at 0x0000013E29B349A0>
           └ <asyncio.runners.Runner object at 0x0000013E325A1FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000013E29B32520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000013E325A1FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000013E29B32480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000013E29B342C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000013E2965AF20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E33663A00>()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E33663A00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E33663A00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E33663A00>()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ('15m',)
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x0000013E33B40980>
                     └ <bound method BinanceFuturesClient.stream_kline of <app.exchange.binance_client.BinanceFuturesClient object at 0x0000013E33A8...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 109, in stream_kline
    stream = self._socket_manager.futures_kline_socket(symbol=symbol.lower(), interval=interval)
             │    │                                           │      │                 └ '15m'
             │    │                                           │      └ <method 'lower' of 'str' objects>
             │    │                                           └ 'SOLUSDT'
             │    └ <binance.ws.streams.BinanceSocketManager object at 0x0000013E33A8B770>
             └ <app.exchange.binance_client.BinanceFuturesClient object at 0x0000013E33A8ACF0>

AttributeError: 'BinanceSocketManager' object has no attribute 'futures_kline_socket'. Did you mean: 'futures_depth_socket'?
2025-09-25 19:01:36.303 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x0000013E33B01DA0>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x0000013E33B01D00>
    │       └ <function run at 0x0000013E27C322A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x0000013E319AFD80>
           │      └ <function Runner.run at 0x0000013E29B349A0>
           └ <asyncio.runners.Runner object at 0x0000013E325A1FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000013E29B32520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000013E325A1FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000013E29B32480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000013E29B342C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000013E2965AF20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E337892D0>()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E337892D0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E337892D0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E337892D0>()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ()
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x0000013E33B40980>
                     └ <bound method BinanceFuturesClient.stream_trades of <app.exchange.binance_client.BinanceFuturesClient object at 0x0000013E33A...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 117, in stream_trades
    stream = self._socket_manager.futures_aggtrade_socket(symbol=symbol.lower())
             │    │                                              │      └ <method 'lower' of 'str' objects>
             │    │                                              └ 'SOLUSDT'
             │    └ <binance.ws.streams.BinanceSocketManager object at 0x0000013E33A8B770>
             └ <app.exchange.binance_client.BinanceFuturesClient object at 0x0000013E33A8ACF0>

AttributeError: 'BinanceSocketManager' object has no attribute 'futures_aggtrade_socket'. Did you mean: 'futures_depth_socket'?
2025-09-25 19:01:36.304 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x0000013E33B01DA0>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x0000013E33B01D00>
    │       └ <function run at 0x0000013E27C322A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x0000013E319AFD80>
           │      └ <function Runner.run at 0x0000013E29B349A0>
           └ <asyncio.runners.Runner object at 0x0000013E325A1FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000013E29B32520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000013E325A1FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x0000013E29B32480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000013E29B342C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000013E2965AF20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E33788BB0>()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E33788BB0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E33788BB0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x0000013E33788BB0>()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ()
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x0000013E33B40980>
                     └ <bound method BinanceFuturesClient.stream_liquidations of <app.exchange.binance_client.BinanceFuturesClient object at 0x00000...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 125, in stream_liquidations
    stream = self._socket_manager.futures_liquidation_socket(symbol=symbol.lower() if symbol else None)
             │    │                                                 │      │          └ 'SOLUSDT'
             │    │                                                 │      └ <method 'lower' of 'str' objects>
             │    │                                                 └ 'SOLUSDT'
             │    └ <binance.ws.streams.BinanceSocketManager object at 0x0000013E33A8B770>
             └ <app.exchange.binance_client.BinanceFuturesClient object at 0x0000013E33A8ACF0>

AttributeError: 'BinanceSocketManager' object has no attribute 'futures_liquidation_socket'
2025-09-25 19:07:51.148 | INFO     | __main__:_handle_events:70 - Symbol definido
2025-09-25 19:07:51.712 | INFO     | app.data.market_data_stream:start:39 - Starting market data stream
2025-09-25 19:07:52.021 | INFO     | __main__:_handle_events:99 - Historico inicial carregado
2025-09-25 19:07:52.021 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x00000203EAC8DE40>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x00000203EAC8DDA0>
    │       └ <function run at 0x00000203DED022A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x00000203E8B5F620>
           │      └ <function Runner.run at 0x00000203E0C249A0>
           └ <asyncio.runners.Runner object at 0x00000203E9741FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000203E0C22520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000203E9741FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000203E0C22480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000203E0C242C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000203E0B3AF20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EAB6E950>()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EAB6E950>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EAB6E950>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EAB6E950>()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ('15m',)
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x00000203EACD0980>
                     └ <bound method BinanceFuturesClient.stream_kline of <app.exchange.binance_client.BinanceFuturesClient object at 0x00000203EAC1...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 112, in stream_kline
    stream = self._socket_manager.futures_kline_socket(symbol=symbol.lower(), interval=interval)
             │    │                                           │      │                 └ '15m'
             │    │                                           │      └ <method 'lower' of 'str' objects>
             │    │                                           └ 'SOLUSDT'
             │    └ <binance.ws.streams.BinanceSocketManager object at 0x00000203EAC1B770>
             └ <app.exchange.binance_client.BinanceFuturesClient object at 0x00000203EAC1ACF0>

AttributeError: 'BinanceSocketManager' object has no attribute 'futures_kline_socket'. Did you mean: 'futures_depth_socket'?
2025-09-25 19:07:52.026 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x00000203EAC8DE40>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x00000203EAC8DDA0>
    │       └ <function run at 0x00000203DED022A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x00000203E8B5F620>
           │      └ <function Runner.run at 0x00000203E0C249A0>
           └ <asyncio.runners.Runner object at 0x00000203E9741FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000203E0C22520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000203E9741FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000203E0C22480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000203E0C242C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000203E0B3AF20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EACA3D90>()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EACA3D90>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EACA3D90>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EACA3D90>()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ()
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x00000203EACD0980>
                     └ <bound method BinanceFuturesClient.stream_trades of <app.exchange.binance_client.BinanceFuturesClient object at 0x00000203EAC...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 120, in stream_trades
    stream = self._socket_manager.futures_aggtrade_socket(symbol=symbol.lower())
             │    │                                              │      └ <method 'lower' of 'str' objects>
             │    │                                              └ 'SOLUSDT'
             │    └ <binance.ws.streams.BinanceSocketManager object at 0x00000203EAC1B770>
             └ <app.exchange.binance_client.BinanceFuturesClient object at 0x00000203EAC1ACF0>

AttributeError: 'BinanceSocketManager' object has no attribute 'futures_aggtrade_socket'. Did you mean: 'futures_depth_socket'?
2025-09-25 19:07:52.028 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x00000203EAC8DE40>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x00000203EAC8DDA0>
    │       └ <function run at 0x00000203DED022A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x00000203E8B5F620>
           │      └ <function Runner.run at 0x00000203E0C249A0>
           └ <asyncio.runners.Runner object at 0x00000203E9741FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000203E0C22520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000203E9741FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x00000203E0C22480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000203E0C242C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000203E0B3AF20>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EACA3D00>()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EACA3D00>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EACA3D00>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <_asyncio.TaskStepMethWrapper object at 0x00000203EACA3D00>()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ()
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x00000203EACD0980>
                     └ <bound method BinanceFuturesClient.stream_liquidations of <app.exchange.binance_client.BinanceFuturesClient object at 0x00000...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 128, in stream_liquidations
    stream = self._socket_manager.futures_liquidation_socket(symbol=symbol.lower() if symbol else None)
             │    │                                                 │      │          └ 'SOLUSDT'
             │    │                                                 │      └ <method 'lower' of 'str' objects>
             │    │                                                 └ 'SOLUSDT'
             │    └ <binance.ws.streams.BinanceSocketManager object at 0x00000203EAC1B770>
             └ <app.exchange.binance_client.BinanceFuturesClient object at 0x00000203EAC1ACF0>

AttributeError: 'BinanceSocketManager' object has no attribute 'futures_liquidation_socket'
2025-09-25 19:16:16.589 | INFO     | __main__:_handle_events:70 - Symbol definido
2025-09-25 19:16:17.146 | INFO     | app.data.market_data_stream:start:39 - Starting market data stream
2025-09-25 19:16:17.841 | INFO     | __main__:_handle_events:99 - Historico inicial carregado
2025-09-25 19:21:11.623 | INFO     | __main__:_handle_events:70 - Symbol definido
2025-09-25 19:21:12.178 | INFO     | app.data.market_data_stream:start:39 - Starting market data stream
2025-09-25 19:21:12.924 | INFO     | __main__:_handle_events:99 - Historico inicial carregado
2025-09-25 19:21:22.946 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 541, in __await_impl__
    self.connection = await self.create_connection()
    │                       │    └ <function connect.create_connection at 0x000001FF05D27BA0>
    │                       └ <websockets.asyncio.client.connect object at 0x000001FF05C74D70>
    └ <websockets.asyncio.client.connect object at 0x000001FF05C74D70>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 467, in create_connection
    _, connection = await loop.create_connection(factory, **kwargs)
                          │    │                 │          └ {'ssl': True, 'server_hostname': 'fstream.binance.com', 'host': 'fstream.binance.com', 'port': 443}
                          │    │                 └ <function connect.create_connection.<locals>.factory at 0x000001FF05D2C720>
                          │    └ <function BaseEventLoop.create_connection at 0x000001FF7BBA3420>
                          └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 1146, in create_connection
    sock = await self._connect_sock(
                 │    └ <function BaseEventLoop._connect_sock at 0x000001FF7BBA3380>
                 └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 1045, in _connect_sock
    await self.sock_connect(sock, address)
          │    │            │     └ ('54.249.53.184', 443)
          │    │            └ <socket.socket [closed] fd=-1, family=2, type=1, proto=0>
          │    └ <function BaseProactorEventLoop.sock_connect at 0x000001FF7BBE4B80>
          └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\proactor_events.py", line 728, in sock_connect
    return await self._proactor.connect(sock, address)
                 │    │         │       │     └ ('54.249.53.184', 443)
                 │    │         │       └ <socket.socket [closed] fd=-1, family=2, type=1, proto=0>
                 │    │         └ <function IocpProactor.connect at 0x000001FF7BC5EAC0>
                 │    └ <IocpProactor overlapped#=4 result#=0>
                 └ <ProactorEventLoop running=True closed=False debug=False>

asyncio.exceptions.CancelledError


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 539, in __await_impl__
    async with asyncio_timeout(self.open_timeout):
               │               │    └ 10
               │               └ <websockets.asyncio.client.connect object at 0x000001FF05C74D70>
               └ <function timeout at 0x000001FF7BB1E020>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\timeouts.py", line 116, in __aexit__
    raise TimeoutError from exc_val
                            └ CancelledError()

TimeoutError


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x000001FF05C0AA20>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ True
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    └ 'SOLUSDT'
    │       │   │              └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   └ <function _handle_events at 0x000001FF05C0A980>
    │       └ <function run at 0x000001FF79C722A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x000001FF03AF8920>
           │      └ <function Runner.run at 0x000001FF7BBA49A0>
           └ <asyncio.runners.Runner object at 0x000001FF046DD2B0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001FF7BBA2520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001FF046DD2B0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001FF7BBA2480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001FF7BBA42C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001FF7BABEF20>
    └ <Handle Task.task_wakeup()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ('15m',)
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x000001FF05C74AD0>
                     └ <bound method BinanceFuturesClient.stream_kline of <app.exchange.binance_client.BinanceFuturesClient object at 0x000001FF05BF...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 141, in stream_kline
    async with stream as socket:
               └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C74EC0>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 91, in __aenter__
    await self.connect()
          │    └ <function ReconnectingWebsocket.connect at 0x000001FF05907060>
          └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C74EC0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 136, in connect
    raise e
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 132, in connect
    self.ws = await self._conn.__aenter__()
    │    │          │    │     └ <function connect.__aenter__ at 0x000001FF05D27E20>
    │    │          │    └ <websockets.asyncio.client.connect object at 0x000001FF05C74D70>
    │    │          └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C74EC0>
    │    └ None
    └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C74EC0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 587, in __aenter__
    return await self
                 └ <websockets.asyncio.client.connect object at 0x000001FF05C74D70>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 578, in __await_impl__
    raise TimeoutError("timed out during opening handshake") from exc
          └ <class 'TimeoutError'>

TimeoutError: timed out during opening handshake
2025-09-25 19:21:23.004 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 541, in __await_impl__
    self.connection = await self.create_connection()
    │                       │    └ <function connect.create_connection at 0x000001FF05D27BA0>
    │                       └ <websockets.asyncio.client.connect object at 0x000001FF05C6A850>
    └ <websockets.asyncio.client.connect object at 0x000001FF05C6A850>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 467, in create_connection
    _, connection = await loop.create_connection(factory, **kwargs)
                          │    │                 │          └ {'ssl': True, 'server_hostname': 'fstream.binance.com', 'host': 'fstream.binance.com', 'port': 443}
                          │    │                 └ <function connect.create_connection.<locals>.factory at 0x000001FF05D2CAE0>
                          │    └ <function BaseEventLoop.create_connection at 0x000001FF7BBA3420>
                          └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 1201, in create_connection
    transport, protocol = await self._create_connection_transport(
                                │    └ <function BaseEventLoop._create_connection_transport at 0x000001FF7BBA34C0>
                                └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 1234, in _create_connection_transport
    await waiter
          └ <Future cancelled>

asyncio.exceptions.CancelledError


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 539, in __await_impl__
    async with asyncio_timeout(self.open_timeout):
               │               │    └ 10
               │               └ <websockets.asyncio.client.connect object at 0x000001FF05C6A850>
               └ <function timeout at 0x000001FF7BB1E020>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\timeouts.py", line 116, in __aexit__
    raise TimeoutError from exc_val
                            └ CancelledError()

TimeoutError


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x000001FF05C0AA20>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ True
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    └ 'SOLUSDT'
    │       │   │              └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   └ <function _handle_events at 0x000001FF05C0A980>
    │       └ <function run at 0x000001FF79C722A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x000001FF03AF8920>
           │      └ <function Runner.run at 0x000001FF7BBA49A0>
           └ <asyncio.runners.Runner object at 0x000001FF046DD2B0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001FF7BBA2520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001FF046DD2B0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001FF7BBA2480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001FF7BBA42C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001FF7BABEF20>
    └ <Handle Task.task_wakeup()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ()
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x000001FF05C74AD0>
                     └ <bound method BinanceFuturesClient.stream_trades of <app.exchange.binance_client.BinanceFuturesClient object at 0x000001FF05B...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 162, in stream_trades
    async with stream as socket:
               └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C6A710>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 91, in __aenter__
    await self.connect()
          │    └ <function ReconnectingWebsocket.connect at 0x000001FF05907060>
          └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C6A710>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 136, in connect
    raise e
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 132, in connect
    self.ws = await self._conn.__aenter__()
    │    │          │    │     └ <function connect.__aenter__ at 0x000001FF05D27E20>
    │    │          │    └ <websockets.asyncio.client.connect object at 0x000001FF05C6A850>
    │    │          └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C6A710>
    │    └ None
    └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C6A710>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 587, in __aenter__
    return await self
                 └ <websockets.asyncio.client.connect object at 0x000001FF05C6A850>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 578, in __await_impl__
    raise TimeoutError("timed out during opening handshake") from exc
          └ <class 'TimeoutError'>

TimeoutError: timed out during opening handshake
2025-09-25 19:21:23.010 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 541, in __await_impl__
    self.connection = await self.create_connection()
    │                       │    └ <function connect.create_connection at 0x000001FF05D27BA0>
    │                       └ <websockets.asyncio.client.connect object at 0x000001FF05C6AE90>
    └ <websockets.asyncio.client.connect object at 0x000001FF05C6AE90>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 467, in create_connection
    _, connection = await loop.create_connection(factory, **kwargs)
                          │    │                 │          └ {'ssl': True, 'server_hostname': 'fstream.binance.com', 'host': 'fstream.binance.com', 'port': 443}
                          │    │                 └ <function connect.create_connection.<locals>.factory at 0x000001FF05D2CFE0>
                          │    └ <function BaseEventLoop.create_connection at 0x000001FF7BBA3420>
                          └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 1146, in create_connection
    sock = await self._connect_sock(
                 │    └ <function BaseEventLoop._connect_sock at 0x000001FF7BBA3380>
                 └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 1045, in _connect_sock
    await self.sock_connect(sock, address)
          │    │            │     └ ('54.249.53.184', 443)
          │    │            └ <socket.socket [closed] fd=-1, family=2, type=1, proto=0>
          │    └ <function BaseProactorEventLoop.sock_connect at 0x000001FF7BBE4B80>
          └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\proactor_events.py", line 728, in sock_connect
    return await self._proactor.connect(sock, address)
                 │    │         │       │     └ ('54.249.53.184', 443)
                 │    │         │       └ <socket.socket [closed] fd=-1, family=2, type=1, proto=0>
                 │    │         └ <function IocpProactor.connect at 0x000001FF7BC5EAC0>
                 │    └ <IocpProactor overlapped#=4 result#=0>
                 └ <ProactorEventLoop running=True closed=False debug=False>

asyncio.exceptions.CancelledError


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 539, in __await_impl__
    async with asyncio_timeout(self.open_timeout):
               │               │    └ 10
               │               └ <websockets.asyncio.client.connect object at 0x000001FF05C6AE90>
               └ <function timeout at 0x000001FF7BB1E020>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\timeouts.py", line 116, in __aexit__
    raise TimeoutError from exc_val
                            └ CancelledError()

TimeoutError


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x000001FF05C0AA20>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ True
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   │              │    └ 'SOLUSDT'
    │       │   │              └ Namespace(symbol='SOLUSDT', config=None, log_level='INFO', once=True)
    │       │   └ <function _handle_events at 0x000001FF05C0A980>
    │       └ <function run at 0x000001FF79C722A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x000001FF03AF8920>
           │      └ <function Runner.run at 0x000001FF7BBA49A0>
           └ <asyncio.runners.Runner object at 0x000001FF046DD2B0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001FF7BBA2520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001FF046DD2B0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001FF7BBA2480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001FF7BBA42C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001FF7BABEF20>
    └ <Handle Task.task_wakeup()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
                     │              │    │         └ ()
                     │              │    └ 'SOLUSDT'
                     │              └ <app.data.market_data_stream.MarketDataStream object at 0x000001FF05C74AD0>
                     └ <bound method BinanceFuturesClient.stream_liquidations of <app.exchange.binance_client.BinanceFuturesClient object at 0x00000...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 183, in stream_liquidations
    async with stream as socket:
               └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C6AD50>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 91, in __aenter__
    await self.connect()
          │    └ <function ReconnectingWebsocket.connect at 0x000001FF05907060>
          └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C6AD50>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 136, in connect
    raise e
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\ws\reconnecting_websocket.py", line 132, in connect
    self.ws = await self._conn.__aenter__()
    │    │          │    │     └ <function connect.__aenter__ at 0x000001FF05D27E20>
    │    │          │    └ <websockets.asyncio.client.connect object at 0x000001FF05C6AE90>
    │    │          └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C6AD50>
    │    └ None
    └ <binance.ws.reconnecting_websocket.ReconnectingWebsocket object at 0x000001FF05C6AD50>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 587, in __aenter__
    return await self
                 └ <websockets.asyncio.client.connect object at 0x000001FF05C6AE90>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\asyncio\client.py", line 578, in __await_impl__
    raise TimeoutError("timed out during opening handshake") from exc
          └ <class 'TimeoutError'>

TimeoutError: timed out during opening handshake
2025-09-26 07:30:19.595 | INFO     | __main__:_handle_events:70 - Symbol definido
2025-09-26 07:30:20.160 | INFO     | app.data.market_data_stream:start:39 - Starting market data stream
2025-09-26 07:30:20.519 | INFO     | __main__:_handle_events:99 - Historico inicial carregado
2025-09-26 07:45:03.853 | INFO     | app.execution.trade_engine:_ensure_leverage:39 - Leverage sync
2025-09-26 07:45:03.855 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 08:04:27.904 | INFO     | __main__:_handle_events:70 - Symbol definido
2025-09-26 08:04:28.475 | INFO     | app.data.market_data_stream:start:39 - Starting market data stream
2025-09-26 08:04:28.834 | INFO     | __main__:_handle_events:99 - Historico inicial carregado
2025-09-26 08:15:03.833 | INFO     | app.execution.trade_engine:_ensure_leverage:39 - Leverage sync
2025-09-26 08:15:03.834 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 08:30:03.495 | INFO     | app.exchange.binance_client:place_order:120 - Sending order
2025-09-26 09:17:41.089 | INFO     | __main__:_handle_events:70 - Symbol definido
2025-09-26 09:17:41.674 | INFO     | app.data.market_data_stream:start:39 - Starting market data stream
2025-09-26 09:17:42.164 | INFO     | __main__:_handle_events:99 - Historico inicial carregado
2025-09-26 09:30:04.569 | INFO     | app.execution.trade_engine:_ensure_leverage:39 - Leverage sync
2025-09-26 09:30:04.578 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 09:45:03.764 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 10:00:03.570 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 10:15:03.934 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 10:30:03.662 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 10:45:03.712 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 11:00:03.638 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 11:15:03.888 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 11:30:03.667 | INFO     | __main__:_handle_events:155 - Decisao processada
2025-09-26 11:37:33.910 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x000001EFAF0A1F80>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x000001EFAF0A1EE0>
    │       └ <function run at 0x000001EFA31322A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x000001EFACB198D0>
           │      └ <function Runner.run at 0x000001EFA50349A0>
           └ <asyncio.runners.Runner object at 0x000001EFADB51FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001EFA5032520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001EFADB51FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001EFA5032480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001EFA50342C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001EFA4F5AF20>
    └ <Handle Task.task_wakeup()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
              │      │              │    │         └ ()
              │      │              │    └ 'SOLUSDT'
              │      │              └ <app.data.market_data_stream.MarketDataStream object at 0x000001EFAF0E8C20>
              │      └ <bound method BinanceFuturesClient.stream_liquidations of <app.exchange.binance_client.BinanceFuturesClient object at 0x00000...
              └ {'e': 'forceOrder', 'E': 1758897311076, 'o': {'s': 'SOLUSDT', 'S': 'SELL', 'o': 'LIMIT', 'f': 'IOC', 'q': '64.82', 'p': '192....

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 200, in stream_liquidations
    yield self._normalize_stream_payload(msg)
          │    │                         └ {'e': 'error', 'type': 'ConnectionClosedError', 'm': 'sent 1011 (internal error) keepalive ping timeout; no close frame recei...
          │    └ <staticmethod(<function BinanceFuturesClient._normalize_stream_payload at 0x000001EFAF02EA20>)>
          └ <app.exchange.binance_client.BinanceFuturesClient object at 0x000001EFAF012F90>

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 317, in _normalize_stream_payload
    raise RuntimeError(f"Stream error: {err_type} - {err_msg}")
                                        │            └ 'sent 1011 (internal error) keepalive ping timeout; no close frame received'
                                        └ 'ConnectionClosedError'

RuntimeError: Stream error: ConnectionClosedError - sent 1011 (internal error) keepalive ping timeout; no close frame received
2025-09-26 11:37:34.230 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x000001EFAF0A1F80>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x000001EFAF0A1EE0>
    │       └ <function run at 0x000001EFA31322A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x000001EFACB198D0>
           │      └ <function Runner.run at 0x000001EFA50349A0>
           └ <asyncio.runners.Runner object at 0x000001EFADB51FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001EFA5032520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001EFADB51FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001EFA5032480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001EFA50342C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001EFA4F5AF20>
    └ <Handle Task.task_wakeup()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
              │      │              │    │         └ ('15m',)
              │      │              │    └ 'SOLUSDT'
              │      │              └ <app.data.market_data_stream.MarketDataStream object at 0x000001EFAF0E8C20>
              │      └ <bound method BinanceFuturesClient.stream_kline of <app.exchange.binance_client.BinanceFuturesClient object at 0x000001EFAF01...
              └ {'e': 'kline', 'E': 1758897380104, 's': 'SOLUSDT', 'k': {'t': 1758897000000, 'T': 1758897899999, 's': 'SOLUSDT', 'i': '15m', ...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 158, in stream_kline
    yield self._normalize_stream_payload(msg)
          │    │                         └ {'e': 'error', 'type': 'ConnectionClosedError', 'm': 'sent 1011 (internal error) keepalive ping timeout; no close frame recei...
          │    └ <staticmethod(<function BinanceFuturesClient._normalize_stream_payload at 0x000001EFAF02EA20>)>
          └ <app.exchange.binance_client.BinanceFuturesClient object at 0x000001EFAF012F90>

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 317, in _normalize_stream_payload
    raise RuntimeError(f"Stream error: {err_type} - {err_msg}")
                                        │            └ 'sent 1011 (internal error) keepalive ping timeout; no close frame received'
                                        └ 'ConnectionClosedError'

RuntimeError: Stream error: ConnectionClosedError - sent 1011 (internal error) keepalive ping timeout; no close frame received
2025-09-26 11:37:44.786 | ERROR    | app.data.market_data_stream:_dispatch_stream:79 - Stream dispatch failed
Traceback (most recent call last):

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 172, in <module>
    main()
    └ <function main at 0x000001EFAF0A1F80>

  File "c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\main.py", line 168, in main
    asyncio.run(_handle_events(args.symbol, args.config, args.log_level, args.once))
    │       │   │              │    │       │    │       │    │          │    └ False
    │       │   │              │    │       │    │       │    │          └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    │       │    └ 'INFO'
    │       │   │              │    │       │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    │       │    └ None
    │       │   │              │    │       └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   │              │    └ None
    │       │   │              └ Namespace(symbol=None, config=None, log_level='INFO', once=False)
    │       │   └ <function _handle_events at 0x000001EFAF0A1EE0>
    │       └ <function run at 0x000001EFA31322A0>
    └ <module 'asyncio' from 'C:\\Users\\Mateus\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object _handle_events at 0x000001EFACB198D0>
           │      └ <function Runner.run at 0x000001EFA50349A0>
           └ <asyncio.runners.Runner object at 0x000001EFADB51FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<_handle_events() running at c:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\ap...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001EFA5032520>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001EFADB51FD0>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x000001EFA5032480>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001EFA50342C0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2050, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001EFA4F5AF20>
    └ <Handle Task.task_wakeup()>
  File "C:\Users\Mateus\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup()>

> File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\data\market_data_stream.py", line 70, in _dispatch_stream
    async for msg in stream_factory(self._symbol, *args):
              │      │              │    │         └ ()
              │      │              │    └ 'SOLUSDT'
              │      │              └ <app.data.market_data_stream.MarketDataStream object at 0x000001EFAF0E8C20>
              │      └ <bound method BinanceFuturesClient.stream_trades of <app.exchange.binance_client.BinanceFuturesClient object at 0x000001EFAF0...
              └ {'e': 'aggTrade', 'E': 1758897380106, 'a': 966858500, 's': 'SOLUSDT', 'p': '193.8100', 'q': '19.35', 'f': 2715362716, 'l': 27...

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 179, in stream_trades
    yield self._normalize_stream_payload(msg)
          │    │                         └ {'e': 'error', 'type': 'ConnectionClosedError', 'm': 'sent 1011 (internal error) keepalive ping timeout; no close frame recei...
          │    └ <staticmethod(<function BinanceFuturesClient._normalize_stream_payload at 0x000001EFAF02EA20>)>
          └ <app.exchange.binance_client.BinanceFuturesClient object at 0x000001EFAF012F90>

  File "C:\Users\Mateus\Desktop\úteis\matheus\docs\python\ai trading\app\exchange\binance_client.py", line 317, in _normalize_stream_payload
    raise RuntimeError(f"Stream error: {err_type} - {err_msg}")
                                        │            └ 'sent 1011 (internal error) keepalive ping timeout; no close frame received'
                                        └ 'ConnectionClosedError'

RuntimeError: Stream error: ConnectionClosedError - sent 1011 (internal error) keepalive ping timeout; no close frame received
2025-09-29 09:42:17.749 | INFO     | app.data.market_data_stream:start:39 - Starting market data stream
2025-09-29 09:42:18.149 | INFO     | __main__:_handle_events:99 - Historico inicial carregado
2025-09-29 09:45:07.043 | INFO     | app.execution.trade_engine:_ensure_leverage:39 - Leverage sync
2025-09-29 09:45:07.358 | INFO     | app.exchange.binance_client:place_order:134 - Sending order
